scalar Date
scalar IntString
type Query {
    posts(filters: PostInputFilter, first: Int, last: Int, after: String, before: String): PostConnection!
    challenges(filters: ChallengeInputFilter, first: Int, last: Int, after: String, before: String): ChallengeConnection!
    cruises(filters:CruiseInputFilter, first: Int, last: Int, after: String, before: String): CruiseConnection!
    comments(filters: CommentInputFilter, first: Int, last: Int, after: String, before: String): CommentConnection!
    users(filters:UserInputFilter, first: Int, last: Int, after: String, before: String): UserConnection!
    user(id: String!): User!
    post(id: Int!): Post!
    cruise(id: Int!): Cruise!
    challenge(id: String!): Challenge!
    fetchAppLockStatus: AppLockStatus!
}
type Mutation {
    createUser(input: CreateUserInput!): UserMutationResponse!
    updateUser(input: UpdateUserInput!): UserMutationResponse!
    createPost(input: CreatePostInput!): CreatePostMutationResponse!
    createChallenge(input: CreateChallengeInput!): CreateChallengeMutationResponse!
    createCruise(input: CreateCruiseInput!): CreateCruiseMutationResponse!
    createComment(input: CreateCommentInput!): CreateCommentMutationResponse!
    createReaction(input: CreateReactionInput!): CreateReactionMutationResponse!
    deleteReaction(input: DeleteReactionInput!) : CreateReactionMutationResponse!
    followEntity(input: FollowEntityInput!): FollowEntityMutationResponse!
    unfollowEntity(input: FollowEntityInput!): FollowEntityMutationResponse!
    followUser(input: UserFollowInput!): UserFollowMutationResponse!
    unfollowUser(input: UserFollowInput!): UserFollowMutationResponse!
    enablePeek: EnablePeekMutationResponse!
}

interface MutationResponse {
  code: String!
  success: Boolean!
  message: String!
}

type PageInfo {
    hasNextPage: Boolean!
    hasPreviousPage: Boolean!
    startCursor: String
    endCursor: String
}

type UserMutationResponse implements MutationResponse{
  code: String!
  success: Boolean!
  message: String!
  user: User
}

type CreatePostMutationResponse implements MutationResponse {
  code: String!
  success: Boolean!
  message: String!
  post: Post
}

type CreateCruiseMutationResponse implements MutationResponse {
   code: String!
   success: Boolean!
   message: String!
   cruise: Cruise
}

type CreateChallengeMutationResponse implements MutationResponse {
    code: String!
    success: Boolean!
    message: String!
    challenge: Challenge
}

type CreateCommentMutationResponse implements MutationResponse {
    code: String!
    success: Boolean!
    message: String!
    comment: Comment
}

type CreateReactionMutationResponse implements MutationResponse {
    code: String!
    success: Boolean!
    message: String!
    reaction: Reaction
}

type FollowEntityMutationResponse implements MutationResponse {
    code: String!
    success: Boolean!
    message: String!
    entityId: Int
}

type UserFollowMutationResponse implements MutationResponse {
    code: String!
    success: Boolean!
    message: String!
    user: User
}

type EnablePeekMutationResponse implements MutationResponse {
    code: String!
    success: Boolean!
    message: String!
}

## Input types

input CreateUserInput {
    email: String! 
    firstName: String! 
    lastName: String! 
    uid: String!
}

input UpdateUserInput {
    firstName: String 
    lastName: String  
    imgUrl: String 
    userName: String 
    bio: String
    uid: String!
}

input LocationInput {
    lat: Float!
    long: Float!
}

input CreatePostInput {
    attachmentType: AttachmentType
    uid: String!
    location: LocationInput
    content: String!
    fileAttachment: FileInput
}

input CreateChallengeInput {
    uid: String!
    challenge: String!
    attachmentType: AttachmentType
    fileAttachment: FileInput
    start: Date
    end: Date
}

input CreateCruiseInput {
    uid: String!
    slogan: String!
    attachmentType: AttachmentType
    fileAttachment: FileInput
}

input CreateCommentInput {
    entityId: Int!
    uid: String!
    comment: String!
    attachmentType: AttachmentType
    fileAttachment: FileInput
    entityType: EntityType!
}

input CreateReactionInput {
    uid: String!
    entityId: Int!
    entityType: EntityType!
    reactionType: ReactionType!
}

input DeleteReactionInput {
    uid: String!
    entityId: Int!
    entityType: EntityType!
    reactionType: ReactionType!
}

input FileInput {
    mimetype: String!
    filename: String!
    encoding: String!
    url: String!
}

input FollowEntityInput {
    id: Int!
    uid: String!
    entityType: EntityType!
}

input UserFollowInput {
    currentUid: String!
    followUid: String!
}


## Object types


type LatLng {
    lat: Float
    long: Float
}

type File {
    filename: String!
    mimetype: String!
    encoding: String!
    url: String!
}

type Reaction {
    hearts: Int!
    kisses: Int!
    hot: Int!
}
enum AttachmentType {
    VIDEO
    IMAGE
    AUDIO
}
enum EntityType {
    POST
    CHALLENGE
    CRUISE
}

enum AppLock {
    UNLOCKED
    LOCKED
}

enum ReactionType {
    KISSES
    HEARTS
    HOT
}

type AppLockStatus {
    status: AppLock!
}

type User {
    userId: Int!
    uid: String!
    firstName: String!
    lastName: String!
    userName: String
    email: String!
    created: Date!  
    updated: Date!
    location: LatLng
    posts(filters: PostInputFilter, first: Int, last: Int, after: String, before: String): PostConnection!
    followers(filters:UserInputFilter, first: Int, last: Int, after: String, before: String): UserConnection!
    following(filters:UserInputFilter, first: Int, last: Int, after: String, before: String): UserConnection!
    cruises(filters:CruiseInputFilter, first: Int, last: Int, after: String, before: String): CruiseConnection!
    cruiseFollowing(filters:CruiseInputFilter, first: Int, last: Int, after: String, before: String): CruiseConnection!
    challenges(filters: ChallengeInputFilter, first: Int, last: Int, after: String, before: String): ChallengeConnection!
    challengeFollowing(filters: ChallengeInputFilter, first: Int, last: Int, after: String, before: String): ChallengeConnection!
}

type Post {
    id: Int!         
    attachmentType: AttachmentType   
    attachmentMeta: File    
    user: User!       
    userId: String!    
    attachmentUrl: String     
    content: String!  
    hashtags: [String]    
    reaction: Reaction!  
    location: LatLng 
    comments(filters: CommentInputFilter, first: Int, last: Int, after: String, before: String): CommentConnection!  
    cruiseId: Int   
    challengeId: Int
    created: Date!  
    updated: Date!
}

type Challenge {
    id: Int!       
    creator: User!  
    challenge: String!
    attachmentType: AttachmentType
    attachmentUrl: String
    attachmentMeta: File
    creatorId: String!
    followers(filters:UserInputFilter, first: Int, last: Int, after: String, before: String): UserConnection!
    start: String!  
    hashtags: [String] 
    reaction: Reaction! 
    kisses: [String]!
    hearts: [String]!
    hot: [String]!  
    end: String! 
    comments(filters: CommentInputFilter, first: Int, last: Int, after: String, before: String): CommentConnection!     
    created: Date!  
    updated: Date! 
    posts(filters: PostInputFilter, first: Int, last: Int, after: String, before: String): PostConnection!
}

type Comment  {
    id: Int!     
    entityId: Int!  
    comment: String!
    attachmentType: AttachmentType
    attachmentUrl: String
    attachmentMeta: File
    userId: String! 
    hashtags: [String] 
    user: User! 
    reaction: Reaction!  
    kisses: [String]!
    hearts: [String]!
    hot: [String]!
    created: Date!  
    updated: Date!
    cruise:  Cruise
    post: Post
    challenge: Challenge
}

type Cruise {
    id: Int!     
    creator: User! 
    slogan: String!  
    attachmentType: AttachmentType
    attachmentUrl: String
    attachmentMeta: File
    creatorId: Int!
    reaction: Reaction! 
    kisses: [String]!
    hearts: [String]!
    hot: [String]!
    hashtags: [String] 
    followers(filters:UserInputFilter, first: Int, last: Int, after: String, before: String): UserConnection!
    comments(filters: CommentInputFilter, first: Int, last: Int, after: String, before: String): CommentConnection! 
    created: Date!  
    updated: Date!
    posts(filters: PostInputFilter, first: Int, last: Int, after: String, before: String): PostConnection!
}

# Edges and Connection Definitions

type UserConnection{
    pageInfo: PageInfo!
    edges: [UserEdge]!
}

type UserEdge {
    cursor: String!
    node: User!
}

type PostConnection{
    pageInfo: PageInfo!
    edges: [PostEdge]!
}

type PostEdge {
    cursor: String!
    node: Post!
}

type CruiseConnection {
    pageInfo: PageInfo!
    edges: [CruiseEdge]!
}

type CruiseEdge {
    cursor: String!
    node: Cruise!
}

type ChallengeConnection {
    pageInfo: PageInfo!
    edges: [ChallengeEdge]!
}

type ChallengeEdge {
    cursor: String!
    node: Challenge!
}

type CommentConnection {
    pageInfo: PageInfo!
    edges: [CommentEdge]!
}

type CommentEdge {
    cursor: String!
    node: Comment!
}


# Query Input Filters Definitions
input FieldExpressionInput {
    gte: Int
    gt: Int
    lt: Int
    lte: Int
    contains: String
    startsWith: String
    endsWith: String
    equals: IntString
    in: [IntString!]
    notIn: [IntString!]
}

input PostInputFilter {
    id: FieldExpressionInput
    user: UserInputFilter
    content: FieldExpressionInput
    hashtags: FieldExpressionInput
    comments: CommentRelationFilter
    cruises: CruiseRelationFilter
    challenge: ChallengeInputFilter
    AND: [PostInputFilter!]
    OR: [PostInputFilter!]
}

input UserInputFilter {
    uid: FieldExpressionInput
    firstName: FieldExpressionInput
    lastName: FieldExpressionInput
    userName: FieldExpressionInput
    bio: FieldExpressionInput
    cruiseFollowing: CruiseRelationFilter
    challengeFollowing: ChallengeRelationFilter
    following: UserRelationFilter
    followers: UserRelationFilter
    AND: [UserInputFilter!]
    OR: [UserInputFilter!]

}
input UserRelationFilter {
    every: UserInputFilter
}

input ChallengeInputFilter {
    id: FieldExpressionInput
    challenge: FieldExpressionInput
    creator: UserInputFilter
    hashtags: FieldExpressionInput
    created: FieldExpressionInput
    updated: FieldExpressionInput
    kisses: FieldExpressionInput
    hot: FieldExpressionInput
    hearts: FieldExpressionInput
    post: PostInputFilter
    AND: [ChallengeInputFilter!]
    OR: [ChallengeInputFilter!]
}

input CommentInputFilter {
    id: FieldExpressionInput
    comment: FieldExpressionInput
    user: UserInputFilter
    post: PostInputFilter
    challenge: ChallengeInputFilter
    cruise: CruiseInputFilter
    kisses: FieldExpressionInput
    hot: FieldExpressionInput
    hearts: FieldExpressionInput
    AND: [CommentInputFilter!]
    OR: [CommentInputFilter!]
}

input CommentRelationFilter {
    every: CommentInputFilter
}
input PostRelationFilter {
    every: PostInputFilter
}

input CruiseInputFilter {
    id: FieldExpressionInput
    slogan: FieldExpressionInput
    creator: UserInputFilter
    hashtags: FieldExpressionInput
    posts: PostRelationFilter
    kisses: FieldExpressionInput
    hot: FieldExpressionInput
    hearts: FieldExpressionInput
    AND: [CruiseInputFilter!]
    OR: [CruiseInputFilter!]
}
input CruiseRelationFilter {
    every: CruiseInputFilter
}

input ChallengeRelationFilter {
    every: ChallengeInputFilter
}


